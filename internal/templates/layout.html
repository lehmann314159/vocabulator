<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Vocabulator - Track and learn new vocabulary words">
    <meta name="theme-color" content="#1a1a2e">
    <title>{{if .Title}}{{.Title}} - {{end}}Vocabulator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="manifest" href="/static/manifest.json">
    <link rel="apple-touch-icon" href="/static/icons/icon-192.png">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
</head>
<body>
    <header class="container">
        <nav>
            <ul>
                <li><strong><a href="/">Vocabulator</a></strong></li>
            </ul>
            <ul>
                <li><a href="/">Words</a></li>
                <li><a href="/random">Random</a></li>
                <li><a href="/import">Import</a></li>
                <li><a href="/settings">Settings</a></li>
            </ul>
        </nav>
    </header>
    <main class="container">
        {{block "content" .}}{{end}}
    </main>
    <footer class="container">
        <small>Vocabulator &copy; 2024</small>
    </footer>
    <script>
        // Include API token in all HTMX requests
        document.body.addEventListener('htmx:configRequest', (e) => {
            const token = localStorage.getItem('apiToken');
            if (token) {
                e.detail.headers['Authorization'] = 'Bearer ' + token;
            }
        });

        // Register service worker for PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/static/js/sw.js');
        }
    </script>
</body>
</html>
